{% extends 'base.html' %}
{% load static %}

{% block content %}

<section class="section-content padding-y bg">

    <header class="section-heading">
        <h3>Customer Reviews for {{ book.title }}</h3>
    </header>

    <section>
        <h4>Add Your Review</h4>
        <form method="post" action="{% url 'submit_review' book.id %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Submit Review</button>
        </form>
        <hr>
    </section>
    

    {% for review in reviews %}
        <article class="box mb-3">
            <div class="icontext w-100">
                <div class="text">
                    <span class="date text-muted float-md-right">{{review.created_at}} </span>
                    <h6 class="mb-1">{{review.user}} </h6>
                    <div class="rating-star">
                        <span>
                            <i class="fa fa-star{% if review.rating == 0.5 %}-half-o{% elif review.rating < 1 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 1.5 %}-half-o{% elif review.rating < 2 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 2.5 %}-half-o{% elif review.rating < 3 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 3.5 %}-half-o{% elif review.rating < 4 %}-o {% endif %}" aria-hidden="true"></i>
                            <i class="fa fa-star{% if review.rating == 4.5 %}-half-o{% elif review.rating < 5 %}-o {% endif %}" aria-hidden="true"></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <p>
                    {{review.comment}}
                </p>
            </div>
        </article>
    {% endfor %}
</section>
{% endblock %}